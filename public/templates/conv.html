 <md-content class="flex-col" ng-init="showUsersInConv=false">
    <md-menu-bar style="padding: 0px">
            <md-button style="padding: 0px; margin: 0px" ng-click="clearConversation()">
                <md-icon>delete_sweep</md-icon>
            </md-button>

            <md-button style="padding: 0px; margin: 0px" ng-click="showUsers=true">
                <md-icon>group_add</md-icon>
            </md-button>

            <md-button style="padding: 0px; margin: 0px" ng-click="edittingName=true">
                <md-icon>edit</md-icon>
            </md-button>
        
            <md-button style="padding: 0px; margin: 0px" ng-click="leaveConversation()">
                <md-icon>keyboard_tab</md-icon>
            </md-button>
            <md-button style="padding: 0px; margin: 0px" ng-click="showUsersInConv=!showUsersInConv">
                <md-icon>group</md-icon>
            </md-button>
    </md-menu-bar>
    <md-list flex ng-show="showUsersInConv">
        <md-list-item class="md-1-line" ng-repeat="usr in conv.users">
            <img ng-src="{{getAvatarFromId(usr)}}?{{$index}}" class="md-avatar" alt="{{item.who}}" />
            <div class="md-list-item-text" layout="column">
                <p>{{getUserNameFromId(usr)}}</p>
            </div>
        </md-list-item>
    </md-list>

    <form ng-show="edittingName">
        <input ng-model="conv.name"></input>
        <md-button type="submit" ng-click="updateNameConv(conv.name);edittingName=false;">
            <md-icon>done</md-icon>
        </md-button>
    </form>

    <md-content class="conv-users-container" style="background-color:white">
        <md-list flex>
            <md-list-item class="md-2-line" ng-repeat="msg in messages">
                <img ng-src="{{user.avatarUrl}}?{{$index}}" class="md-avatar" alt="{{item.who}}" />
                <div class="md-list-item-text" layout="column">
                    <p>{{msg.from}}: Time: {{msg.time}}</p>
                    <h5>{{msg.messageText}}</h5>
                </div>
            </md-list-item>
        </md-list>
    </md-content>

    <div ng-show="showUsers">
        <ul ng-init="inputno=[]">
          <li ng-repeat="user in users" ng-if="conv.users.indexOf(user._id)<0" ng-class="isAlreadyInConv(user) ? 'disabled' : 'enabled'">
              <a ng-click="addUserToConv(user);">{{user.name}}</a>
          </li>
        </ul>
        <button type="button" ng-click="addUsersToConversation(); showUsers=false;">Add</button>
    </div>

    <form class="send-msg" name="myForm" ng-submit="sendMessage(myForm.newMessage); myForm.newMessage='';">
        <input style="width: 200px" type="text" ng-model="myForm.newMessage"></input>
        <md-button type="submit" ng-disabled="myForm.newMessage===''">
            <md-icon>send</md-icon>
        </md-button>
    </form>

</md-content>